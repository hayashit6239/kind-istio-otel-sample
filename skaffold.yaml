apiVersion: skaffold/v2beta26
kind: Config

build:
  artifacts:
  - image: backend-a
    context: .
    docker:
      dockerfile: containers/service-backend-a/Dockerfile
  - image: backend-b
    context: .
    docker:
      dockerfile: containers/service-backend-b/Dockerfile
  - image: backend-for-frontend
    context: .
    docker:
      dockerfile: containers/service-backend-for-frontend/Dockerfile
  - image: otel-collector
    context: .
    docker:
      dockerfile: containers/opentelemetry-collector/Dockerfile

deploy:
  kubectl:
    manifests:
    - manifest/service-backend-for-frontend.yaml
    - manifest/service-backend-a.yaml
    - manifest/service-backend-b.yaml
    - manifest/opentelemetry-collector.yaml